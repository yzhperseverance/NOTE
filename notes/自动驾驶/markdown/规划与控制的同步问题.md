# 规划与控制的同步问题

​	由于规划和控制的频率相差很大，假设差值为100ms，那么假如每次规划只发送给控制当前的目标点，这会导致在很长一段时间控制没有信号输入，**因此需要发送带绝对时间戳的整条轨迹**，用于控制做时间同步。

## 规划起点的选择

![image-20241128180434528](C:\Users\28609\AppData\Roaming\Typora\typora-user-images\image-20241128180434528.png)

​	由于规控的时间不同步，如果规划起点选择当前时间戳，那么在这段100ms的真空期中，控制执行的还是上一次的规划路径，而规划模块缺与上一次路径当前时刻的点进行拼接，这会导致在控制真正接收到本次规划路径时，其对应规划点与车所在的实际位置有误差，整个规划路径是不连续的。

​	因此规划起点需要选择T+100ms的位置，在此位置与上一路径进行拼接，在控制效果较好的情况下，可以实现规划路径的连续性。倘若控制效果较差，即current_location和pre_planning in T的位置差较大，那么此时应该根据车的定位位置和动力学模型外推出车在T+100ms处的位置，不能再利用上一次规划的路径进行位置的计算了。